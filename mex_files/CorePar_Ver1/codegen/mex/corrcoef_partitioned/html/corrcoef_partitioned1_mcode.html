<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1"> 1</a></span><span class="line"><span class="comment">%%%% TAMADD</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2"> 2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3"> 3</a></span><span class="line"><span class="keyword">function</span>  <span class="var type1" id="S2T23U3">correlation_matrix</span> = corrcoef_partitioned( <span class="var type1" id="S3T1U6">patches_for_correlation</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,4"> 4</a></span><span class="line">coder.varsize(<span class="string">'correlation_matrix'</span>, [5000 1]);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5"> 5</a></span><span class="line"><span class="mxinfo" id="T23:U3"><span class="var type1" id="S2T23U19">correlation_matrix</span> =[]</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6"> 6</a></span><span class="line"><span class="mxinfo" id="T2:U5"><span class="var type1" id="S5T2U24">size_partition</span> = <span class="mxinfo" id="T2:U7">floor(<span class="mxinfo" id="T2:U8"><span class="mxinfo" id="T2:U9">size(<span class="var type1" id="S3T1U30">patches_for_correlation</span>,2)</span>/<span class="mxinfo" id="T2:U11">100</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7"> 7</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T4:U12"><span class="var type1" id="S5T2U36">size_partition</span>==<span class="mxinfo" id="T2:U14">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8"> 8</a></span><span class="line">    <span class="mxinfo" id="T25:U15"><span class="var type1" id="S8T25U40">tempCorrelation</span> = <span class="mxinfo" id="T25:U17">corrcoef(<span class="var type1" id="S3T1U43">patches_for_correlation</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9"> 9</a></span><span class="line">    <span class="mxinfo" id="T23:U19"><span class="var type1" id="S2T23U46">correlation_matrix</span> = <span class="mxinfo" id="T23:U21"><span class="var type1" id="S8T25U48">tempCorrelation</span>(<span class="mxinfo" id="T29:U23"><span class="mxinfo" id="T2:U24">2</span>:<span class="mxinfo" id="T2:U25">end</span></span>,<span class="mxinfo" id="T2:U26">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10">10</a></span><span class="line">    <span class="keyword">return</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11">11</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,13">13</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S11T2U57">i</span> =<span class="mxinfo" id="T2:U28">1</span>:<span class="mxinfo" id="T2:U29">100</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14">14</a></span><span class="line">    <span class="mxinfo" id="T24:U30"><span class="var type1" id="S12T24U63">patches_for_correlation_part</span> = <span class="mxinfo" id="T24:U32">corrcoef(<span class="mxinfo" id="T27:U33"><span class="var type1" id="S3T1U67">patches_for_correlation</span>(<span class="mxinfo" id="T30:U35">:</span>,<span class="mxinfo" id="T31:U36">[<span class="mxinfo" id="T2:U37">1</span>,<span class="mxinfo" id="T26:U38"><span class="mxinfo" id="T2:U39"><span class="mxinfo" id="T2:U40">(<span class="mxinfo" id="T2:U41"><span class="var type1" id="S11T2U77">i</span>-<span class="mxinfo" id="T2:U43">1</span></span>)*<span class="var type1" id="S5T2U79">size_partition</span></span>+<span class="mxinfo" id="T2:U45">1</span></span>:<span class="mxinfo" id="T2:U46"><span class="var type1" id="S11T2U82">i</span>*<span class="var type1" id="S5T2U83">size_partition</span></span></span>]</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15">15</a></span><span class="line">    <span class="mxinfo" id="T23:U49"><span class="var type1" id="S2T23U86">correlation_matrix</span> = <span class="mxinfo" id="T32:U51">[<span class="var type1" id="S2T23U89">correlation_matrix</span>;<span class="mxinfo" id="T28:U53"><span class="var type1" id="S12T24U92">patches_for_correlation_part</span>(<span class="mxinfo" id="T33:U55"><span class="mxinfo" id="T2:U56">2</span>:<span class="mxinfo" id="T2:U57">end</span></span>,<span class="mxinfo" id="T2:U58">1</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16">16</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,18">18</a></span><span class="line"><span class="comment">% correlation_matrix = [1;correlation_matrix];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,21">21</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22">22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,24">24</a></span><span class="line"><span class="comment">%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,25">25</a></span><span class="line"></span></span>
</pre>
